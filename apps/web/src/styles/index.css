@import 'tailwindcss';

/* Aqua Design Tokens */
:root {
  /* ===== COLORS ===== */
  --aqua-blue: #5a8dd9;
  --aqua-blue-hover: #6b9de5;
  --aqua-blue-active: #4978c8;
  --aqua-graphite: #7b7b7b;

  /* Semantic Colors */
  --color-highlight: var(--aqua-blue);
  --color-highlight-hover: var(--aqua-blue-hover);
  --color-selection-bg: var(--aqua-blue);
  --color-selection-text: #ffffff;
  --color-border-strong: #999999;
  --color-border-subtle: #cccccc;
  --color-text-primary: #2c2c2c;
  --color-text-secondary: #666666;

  /* Legacy/Existing Colors */
  --pinstripe-light: #f7f9fc;
  --pinstripe-dark: #e9edf3;
  --bezel-dark: #7b7b7b;
  --bezel-light: #ffffff;
  --font-ui: 'Lucida Grande', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

  /* Aqua Pinstripe Colors */
  --aqua-pinstripe-light-1: #f0f0f0;
  --aqua-pinstripe-light-2: #e4e4e4;
  --aqua-pinstripe-dark-1: rgba(255, 255, 255, 0.08);
  --aqua-pinstripe-dark-2: rgba(0, 0, 0, 0.15);

  /* ===== SHADOWS ===== */
  --shadow-window:
    0 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 15px 40px rgba(0, 0, 0, 0.5),
    0 2px 8px rgba(0, 0, 0, 0.3);

  --shadow-button: 0 1px 2px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8);

  --shadow-button-active: inset 1px 1px 0 #777, inset -1px -1px 0 #f9f9f9;

  --shadow-dropdown: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.6);

  /* ===== GRADIENTS ===== */
  --gradient-toolbar: linear-gradient(to bottom, #ffffff 0%, #e8e8e8 100%);
  --gradient-button: linear-gradient(to bottom, #ffffff 0%, #e8e8e8 100%);
  --gradient-button-hover: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);
  --gradient-button-active: linear-gradient(to bottom, #e0e0e0 0%, #d8d8d8 100%);
  --gradient-dropdown: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);

  /* ===== Z-INDEX SCALE ===== */
  --z-desktop: 0;
  --z-window: 10;
  --z-window-active: 20;
  --z-menubar: 50;
  --z-dock: 50;
  --z-dropdown: 10000;
  --z-modal: 20000;
}

body {
  margin: 0;
  font-family: var(--font-ui);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom Aqua Utilities */
@layer utilities {
  .pinstripe {
    background: repeating-linear-gradient(
      180deg,
      #e7e7e7 0px,
      #e0e0e0 1px,
      #d8d8d8 1px,
      #e0e0e0 2px
    );
  }

  .aqua-pinstripe {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
  }

  .aqua-pinstripe-dark {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-dark-1),
      var(--aqua-pinstripe-dark-1) 1px,
      var(--aqua-pinstripe-dark-2) 1px,
      var(--aqua-pinstripe-dark-2) 2px
    );
  }

  .aqua-window {
    border: 1px solid #7a7a7a;
    border-radius: 6px;
    background: white;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.8) inset,
      0 15px 40px rgba(0, 0, 0, 0.5),
      0 2px 8px rgba(0, 0, 0, 0.3);
    overflow: hidden;
  }

  .aqua-titlebar {
    height: 20px;
    border-bottom: 1px solid #919191;
    border-radius: 6px 6px 0 0;
    background: linear-gradient(to bottom, #ececec 0%, #d8d8d8 50%, #c5c5c5 50.1%, #b8b8b8 100%);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      inset 0 -1px 0 rgba(255, 255, 255, 0.3);
  }

  .aqua-titlebar.active {
    background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d1d1d1 50.1%, #c4c4c4 100%);
    border-bottom: 1px solid #9a9a9a;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 1),
      inset 0 -1px 0 rgba(255, 255, 255, 0.4);
  }

  .aqua-button {
    background: linear-gradient(to bottom, #ffffff, #e8e8e8);
    border: 1px solid #a0a0a0;
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: all 0.15s ease;
  }

  .aqua-button:hover {
    background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
  }

  .aqua-button:active {
    background: linear-gradient(to bottom, #e0e0e0, #d8d8d8);
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15) inset;
  }

  .aqua-menubar {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
    border-bottom: 1px solid #999999;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .desktop-icon-label {
    color: white;
    text-shadow:
      -1px -1px 0 rgba(0, 0, 0, 0.7),
      1px -1px 0 rgba(0, 0, 0, 0.7),
      -1px 1px 0 rgba(0, 0, 0, 0.7),
      1px 1px 0 rgba(0, 0, 0, 0.7);
    font-size: 11px;
    font-family: var(--font-ui);
    border-radius: 3px;
  }

  .desktop-icon-label.desktop-icon-selected {
    background: linear-gradient(to bottom, rgba(82, 140, 224, 0.92), rgba(49, 105, 198, 0.95));
    border: 1px solid rgba(33, 86, 170, 0.95);
    box-shadow:
      inset 0 1px 0 rgba(135, 177, 238, 0.4),
      0 1px 2px rgba(0, 0, 0, 0.4);
    text-shadow:
      0 -1px 0 rgba(0, 0, 0, 0.5),
      0 1px 0 rgba(135, 177, 238, 0.3);
  }

  .toolbar-button:active {
    background: #c8c8c8 !important;
    box-shadow:
      inset 1px 1px 0 #777,
      inset -1px -1px 0 #f9f9f9 !important;
  }

  /* ===== BUTTONS ===== */
  .aqua-button-base {
    @apply relative flex items-center justify-center;
    border: none;
    border-radius: 5px;
    box-shadow:
      0 0.5px 0 0 rgba(255, 255, 255, 0.9) inset,
      0 0 0 0.5px rgba(0, 0, 0, 0.25),
      0 1px 2px rgba(0, 0, 0, 0.1);
    background-image: linear-gradient(
      to bottom,
      #fafafa 0%,
      #f0f0f0 20%,
      #e4e4e4 50%,
      #d8d8d8 80%,
      #cccccc 100%
    );
    font-family: var(--font-ui);
    color: var(--color-text-primary);
  }

  .aqua-button-base:hover:not(:disabled):not(.aqua-button-blue) {
    background-image: linear-gradient(
      to bottom,
      #ffffff 0%,
      #f4f4f4 20%,
      #e8e8e8 50%,
      #dcdcdc 80%,
      #d0d0d0 100%
    );
  }

  .aqua-button-base:active:not(:disabled):not(.aqua-button-blue) {
    background-image: linear-gradient(
      to bottom,
      #d0d0d0 0%,
      #c8c8c8 20%,
      #c0c0c0 50%,
      #b8b8b8 80%,
      #b0b0b0 100%
    );
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.15) inset,
      0 0 0 0.5px rgba(0, 0, 0, 0.2);
  }

  .aqua-button-base:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  /* Classic Mac OS X Aqua Blue Gel Button */
  .aqua-button-base.aqua-button-blue {
    border: none;
    color: #000000;
    background-image: linear-gradient(
      to bottom,
      #c8e4fa 0%,
      #7ec4f6 12%,
      #4aa3df 35%,
      #2d8cd4 50%,
      #4aa3df 65%,
      #7ec4f6 88%,
      #b0d8f5 100%
    );
    box-shadow:
      0 0.5px 0 0 rgba(255, 255, 255, 0.7) inset,
      0 0 0 0.5px rgba(60, 120, 180, 0.5),
      0 1px 2px rgba(0, 0, 0, 0.12);
    position: relative;
    overflow: hidden;
  }

  /* Prominent gel highlight band overlay */
  .aqua-button-base.aqua-button-blue::before {
    content: '';
    position: absolute;
    top: 1px;
    left: 2px;
    right: 2px;
    height: 35%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.5) 0%,
      rgba(255, 255, 255, 0.1) 100%
    );
    border-radius: 3px 3px 100% 100%;
    pointer-events: none;
  }

  .aqua-button-base.aqua-button-blue:hover:not(:disabled) {
    background-image: linear-gradient(
      to bottom,
      #d4ecfc 0%,
      #8ed4f8 12%,
      #5ab3e5 35%,
      #3db0da 50%,
      #5ab3e5 65%,
      #8ed4f8 88%,
      #c0e0f7 100%
    );
  }

  .aqua-button-base.aqua-button-blue:active:not(:disabled) {
    background-image: linear-gradient(
      to bottom,
      #a8d4f0 0%,
      #6ab4dc 12%,
      #3a93c9 35%,
      #1d7cba 50%,
      #3a93c9 65%,
      #6ab4dc 88%,
      #98c4e8 100%
    );
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.12) inset,
      0 0 0 0.5px rgba(60, 120, 180, 0.4);
  }


  /* Segmented controls - visually connected buttons with Aqua styling */
  .aqua-segmented-group {
    display: inline-flex;
    border: 1px solid #8a8a8a;
    border-radius: 5px;
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
    overflow: hidden;
  }

  .aqua-segmented-group > button {
    border-radius: 0;
    margin: 0;
    position: relative;
    z-index: 1;
    box-shadow: none;
  }

  .aqua-segmented-group > button.aqua-button-blue {
    z-index: 2;
    box-shadow: inset 0 0 0 1px rgba(30, 90, 160, 0.3);
  }

  .aqua-segmented-group > button:first-child {
    border-radius: 5px 0 0 5px;
  }

  .aqua-segmented-group > button:last-child {
    border-radius: 0 5px 5px 0;
  }

  .aqua-segmented-group > button:not(:first-child) {
    margin-left: -1px;
  }

  .aqua-segmented-group > button:not(:last-child) {
    border-right: 1px solid rgba(0, 0, 0, 0.2);
  }

  .aqua-segmented-group > button:only-child {
    border-radius: 5px;
  }

  /* Ensure first/last with blue have correct border radius on pseudo-element */
  .aqua-segmented-group > button:first-child.aqua-button-blue::before {
    border-radius: 3px 0 0 100%;
  }

  .aqua-segmented-group > button:last-child.aqua-button-blue::before {
    border-radius: 0 3px 100% 0;
  }

  .aqua-segmented-group > button:only-child.aqua-button-blue::before {
    border-radius: 3px 3px 100% 100%;
  }

  /* ===== DROPDOWN MENUS ===== */
  .aqua-dropdown-menu {
    background-image: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%) !important;
    border: 1px solid #999 !important;
    border-radius: 4px !important;
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
    padding: 4px;
  }

  .aqua-dropdown-item {
    @apply relative flex cursor-pointer items-center px-3 py-1.5 text-[11px] transition-colors outline-none;
    font-family: var(--font-ui);
    font-size: 11px;
    color: var(--color-text-primary);
  }

  .aqua-dropdown-item:hover,
  .aqua-dropdown-item:focus {
    background: var(--color-highlight) !important;
    color: var(--color-selection-text) !important;
  }

  /* ===== TOOLBAR PATTERNS ===== */
  .aqua-toolbar-divider {
    @apply h-[32px] w-px;
    background: linear-gradient(180deg, transparent, #999 0%, #999 50%, transparent 100%);
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
}

/* ===== AQUA DROPDOWN OVERRIDES (outside @layer for specificity) ===== */
div[data-bookmark-dropdown].aqua-dropdown-menu {
  background-image: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%) !important;
  border: 1px solid #999 !important;
  border-radius: 4px !important;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  padding: 4px !important;
}

/* TextEdit contentEditable styling */
[contenteditable] ul,
[contenteditable] ol {
  margin: 1em 0;
  padding-left: 2.5em;
}

[contenteditable] li {
  margin: 0.25em 0;
}

[contenteditable] ul {
  list-style-type: disc;
}

[contenteditable] ol {
  list-style-type: decimal;
}

/* ===== NERD FONT FOR TERMINAL ===== */
@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Regular.ttf')
    format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Bold.ttf')
    format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Italic.ttf')
    format('truetype');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

/* ===== XTERM.JS OVERRIDES ===== */
.xterm {
  @apply relative h-full w-full;
}

.xterm .xterm-screen {
  @apply relative;
}

.xterm .xterm-helper-textarea {
  position: absolute !important;
  opacity: 0 !important;
  left: 0 !important;
  top: 0 !important;
  width: 0 !important;
  height: 0 !important;
  z-index: -10 !important;
  pointer-events: none !important;
  visibility: visible !important;
}
