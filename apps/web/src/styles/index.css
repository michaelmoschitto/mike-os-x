@import 'tailwindcss';

/* Aqua Design Tokens */
:root {
  /* ===== COLORS ===== */
  --aqua-blue: #5a8dd9;
  --aqua-blue-hover: #6b9de5;
  --aqua-blue-active: #4978c8;
  --aqua-graphite: #7b7b7b;

  /* Semantic Colors */
  --color-highlight: var(--aqua-blue);
  --color-highlight-hover: var(--aqua-blue-hover);
  --color-selection-bg: var(--aqua-blue);
  --color-selection-text: #ffffff;
  --color-border-strong: #999999;
  --color-border-subtle: #cccccc;
  --color-text-primary: #2c2c2c;
  --color-text-secondary: #666666;

  /* Legacy/Existing Colors */
  --pinstripe-light: #f7f9fc;
  --pinstripe-dark: #e9edf3;
  --bezel-dark: #7b7b7b;
  --bezel-light: #ffffff;
  --font-ui: 'Lucida Grande', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

  /* Aqua Pinstripe Colors */
  --aqua-pinstripe-light-1: #f0f0f0;
  --aqua-pinstripe-light-2: #e4e4e4;
  --aqua-pinstripe-dark-1: rgba(255, 255, 255, 0.08);
  --aqua-pinstripe-dark-2: rgba(0, 0, 0, 0.15);

  /* ===== SHADOWS ===== */
  --shadow-window:
    0 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 15px 40px rgba(0, 0, 0, 0.5),
    0 2px 8px rgba(0, 0, 0, 0.3);

  --shadow-button: 0 1px 2px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8);

  --shadow-button-active: inset 1px 1px 0 #777, inset -1px -1px 0 #f9f9f9;

  --shadow-dropdown: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.6);

  /* ===== GRADIENTS ===== */
  --gradient-toolbar: linear-gradient(to bottom, #ffffff 0%, #e8e8e8 100%);
  --gradient-button: linear-gradient(to bottom, #ffffff 0%, #e8e8e8 100%);
  --gradient-button-hover: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);
  --gradient-button-active: linear-gradient(to bottom, #e0e0e0 0%, #d8d8d8 100%);
  --gradient-dropdown: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);

  /* ===== Z-INDEX SCALE ===== */
  --z-desktop: 0;
  --z-window: 10;
  --z-window-active: 20;
  --z-menubar: 50;
  --z-dock: 50;
  --z-dropdown: 10000;
  --z-modal: 20000;
}

body {
  margin: 0;
  font-family: var(--font-ui);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom Aqua Utilities */
@layer utilities {
  .pinstripe {
    background: repeating-linear-gradient(
      180deg,
      #e7e7e7 0px,
      #e0e0e0 1px,
      #d8d8d8 1px,
      #e0e0e0 2px
    );
  }

  .aqua-pinstripe {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
  }

  .aqua-pinstripe-dark {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-dark-1),
      var(--aqua-pinstripe-dark-1) 1px,
      var(--aqua-pinstripe-dark-2) 1px,
      var(--aqua-pinstripe-dark-2) 2px
    );
  }

  .aqua-window {
    border: 1px solid #7a7a7a;
    border-radius: 6px;
    background: white;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.8) inset,
      0 15px 40px rgba(0, 0, 0, 0.5),
      0 2px 8px rgba(0, 0, 0, 0.3);
    overflow: hidden;
  }

  .aqua-titlebar {
    height: 20px;
    border-bottom: 1px solid #919191;
    border-radius: 6px 6px 0 0;
    background: linear-gradient(to bottom, #ececec 0%, #d8d8d8 50%, #c5c5c5 50.1%, #b8b8b8 100%);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      inset 0 -1px 0 rgba(255, 255, 255, 0.3);
  }

  .aqua-titlebar.active {
    background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d1d1d1 50.1%, #c4c4c4 100%);
    border-bottom: 1px solid #9a9a9a;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 1),
      inset 0 -1px 0 rgba(255, 255, 255, 0.4);
  }

  .aqua-button {
    background: linear-gradient(to bottom, #ffffff, #e8e8e8);
    border: 1px solid #a0a0a0;
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: all 0.15s ease;
  }

  .aqua-button:hover {
    background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
  }

  .aqua-button:active {
    background: linear-gradient(to bottom, #e0e0e0, #d8d8d8);
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15) inset;
  }

  .aqua-menubar {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
    border-bottom: 1px solid #999999;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .aqua-menubar button {
    outline: none !important;
    border: none !important;
  }

  .aqua-menubar button:focus,
  .aqua-menubar button:focus-visible,
  .aqua-menubar button:active {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
  }

  .desktop-icon-label {
    color: white;
    text-shadow:
      -1px -1px 0 rgba(0, 0, 0, 0.7),
      1px -1px 0 rgba(0, 0, 0, 0.7),
      -1px 1px 0 rgba(0, 0, 0, 0.7),
      1px 1px 0 rgba(0, 0, 0, 0.7);
    font-size: 11px;
    font-family: var(--font-ui);
    border-radius: 3px;
  }

  .desktop-icon-label.desktop-icon-selected {
    background: linear-gradient(to bottom, rgba(82, 140, 224, 0.92), rgba(49, 105, 198, 0.95));
    border: 1px solid rgba(33, 86, 170, 0.95);
    box-shadow:
      inset 0 1px 0 rgba(135, 177, 238, 0.4),
      0 1px 2px rgba(0, 0, 0, 0.4);
    text-shadow:
      0 -1px 0 rgba(0, 0, 0, 0.5),
      0 1px 0 rgba(135, 177, 238, 0.3);
  }

  .toolbar-button:active {
    background: #c8c8c8 !important;
    box-shadow:
      inset 1px 1px 0 #777,
      inset -1px -1px 0 #f9f9f9 !important;
  }

  /* ===== BUTTONS ===== */
  .aqua-button-base {
    @apply relative flex items-center justify-center overflow-hidden rounded-[5px];
    font-family: var(--font-ui);
    border: 1px solid;
    border-color: #9a9a9a #8a8a8a #7a7a7a #8a8a8a;
    background-image: linear-gradient(
      to bottom,
      #f0f0f0 0%,
      #e4e4e4 15%,
      #d4d4d4 50%,
      #c4c4c4 85%,
      #b8b8b8 100%
    );
    box-shadow:
      rgba(0, 0, 0, 0.4) 0 2px 4px,
      rgba(0, 0, 0, 0.3) 0 1px 2px,
      rgba(160, 160, 160, 0.4) 0 1px 1px,
      rgba(0, 0, 0, 0.25) 0 0 0 0.5px inset,
      rgba(80, 80, 80, 0.5) 0 1px 2px inset,
      rgba(200, 200, 200, 0.6) 0 2px 3px 1px inset;
    color: var(--color-text-primary);
  }

  .aqua-button-base::before {
    @apply pointer-events-none absolute z-[2];
    content: '';
    top: 1px;
    left: 3px;
    right: 3px;
    height: 28%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.7) 0%,
      rgba(255, 255, 255, 0.2) 100%
    );
    border-radius: 4px 4px 50% 50%;
    filter: blur(0.2px);
  }

  .aqua-button-base::after {
    @apply pointer-events-none absolute;
    content: '';
    bottom: 1px;
    left: 3px;
    right: 3px;
    height: 33%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.5) 100%
    );
    border-radius: 50% 50% 3px 3px;
    filter: blur(0.3px);
  }

  .aqua-button-base:hover:not(:disabled):not(.aqua-button-blue) {
    background-image: linear-gradient(
      to bottom,
      #f8f8f8 0%,
      #ededed 15%,
      #dedede 50%,
      #cfcfcf 85%,
      #c4c4c4 100%
    );
  }

  .aqua-button-base:active:not(:disabled):not(.aqua-button-blue) {
    background-image: linear-gradient(
      to bottom,
      #b0b0b0 0%,
      #a8a8a8 15%,
      #9a9a9a 50%,
      #909090 85%,
      #888888 100%
    );
    box-shadow:
      rgba(0, 0, 0, 0.3) 0 1px 2px,
      rgba(0, 0, 0, 0.2) 0 0.5px 1px,
      rgba(0, 0, 0, 0.3) 0 0 0 0.5px inset,
      rgba(60, 60, 60, 0.6) 0 1px 3px inset,
      rgba(140, 140, 140, 0.5) 0 2px 3px 1px inset;
    border-color: #777 #666 #555 #666;
  }

  .aqua-button-base:active:not(:disabled):not(.aqua-button-blue)::before {
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.5) 0%,
      rgba(255, 255, 255, 0.2) 100%
    );
  }

  .aqua-button-base:disabled {
    @apply cursor-not-allowed opacity-40;
  }

  .aqua-button-base.aqua-button-blue {
    @apply relative overflow-hidden text-black;
    border: 1px solid;
    border-color: #4a90c8 #3080b8 #2070a8 #3080b8;
    background-image: linear-gradient(to bottom, #90d0f8 0%, #58b8ec 50%, #78c8f4 100%);
    box-shadow:
      rgba(0, 0, 0, 0.5) 0 2px 4px,
      rgba(0, 0, 0, 0.4) 0 1px 2px,
      rgba(80, 160, 220, 0.5) 0 1px 1px,
      rgba(0, 0, 0, 0.3) 0 0 0 0.5px inset,
      rgba(20, 80, 140, 0.8) 0 1px 3px inset,
      rgba(100, 180, 240, 0.75) 0 2px 3px 1px inset;
  }

  .aqua-button-base.aqua-button-blue::before {
    @apply pointer-events-none absolute z-[2];
    content: '';
    top: 1px;
    left: 3px;
    right: 3px;
    height: 28%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.7) 0%,
      rgba(255, 255, 255, 0.2) 100%
    );
    border-radius: 4px 4px 50% 50%;
    filter: blur(0.2px);
  }

  .aqua-button-base.aqua-button-blue::after {
    @apply pointer-events-none absolute;
    content: '';
    bottom: 1px;
    left: 3px;
    right: 3px;
    height: 33%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.5) 100%
    );
    border-radius: 50% 50% 3px 3px;
    filter: blur(0.3px);
  }

  .aqua-button-base.aqua-button-blue:hover:not(:disabled) {
    background-image: linear-gradient(to bottom, #a0d8fc 0%, #68c0f0 50%, #88d0f8 100%);
  }

  .aqua-button-base.aqua-button-blue:active:not(:disabled) {
    background-image: linear-gradient(to bottom, #68b0dc 0%, #3898d0 50%, #58a8e0 100%);
    box-shadow:
      rgba(0, 0, 0, 0.4) 0 1px 2px,
      rgba(0, 0, 0, 0.3) 0 0.5px 1px,
      rgba(0, 60, 120, 0.4) 0 0 0 0.5px inset,
      rgba(10, 60, 110, 0.8) 0 1px 3px inset,
      rgba(70, 140, 200, 0.6) 0 2px 3px 1px inset;
    border-color: #2070a8 #1860a0 #105090 #1860a0;
  }

  .aqua-button-base.aqua-button-blue:active:not(:disabled)::before {
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.5) 0%,
      rgba(255, 255, 255, 0.15) 100%
    );
  }

  .aqua-segmented-group {
    @apply inline-flex overflow-hidden rounded-[5px] bg-transparent p-0;
    border: 1px solid;
    border-color: #9a9a9a #8a8a8a #7a7a7a #8a8a8a;
    box-shadow:
      0 0 1px rgba(0, 0, 0, 0.3),
      0 1px 1px rgba(0, 0, 0, 0.15),
      0 2px 3px rgba(0, 0, 0, 0.12);
  }

  .aqua-segmented-group > button {
    @apply relative z-[1] m-0 rounded-none border-none;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.04);
  }

  .aqua-segmented-group > button.aqua-button-blue {
    @apply z-[2];
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.85),
      inset 0 -1px 0 rgba(0, 80, 160, 0.08);
  }

  .aqua-segmented-group > button:first-child {
    @apply rounded-l-[4px];
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  .aqua-segmented-group > button:last-child {
    @apply rounded-r-[4px];
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  .aqua-segmented-group > button:not(:first-child) {
    border-left: 1px solid rgba(0, 0, 0, 0.15);
  }

  .aqua-segmented-group > button:not(:last-child)::after {
    @apply absolute right-0 w-px rounded-none;
    content: '';
    top: 2px;
    bottom: 2px;
    background: rgba(255, 255, 255, 0.6);
  }

  .aqua-segmented-group > button:only-child {
    @apply rounded-[4px];
  }

  .aqua-segmented-group > button::before {
    top: 1px;
    left: 2px;
    right: 2px;
    border-radius: 0 0 100% 100%;
  }

  .aqua-segmented-group > button:first-child::before {
    left: 3px;
    border-radius: 2px 0 100% 100%;
  }

  .aqua-segmented-group > button:last-child::before {
    right: 3px;
    border-radius: 0 2px 100% 100%;
  }

  .aqua-segmented-group > button:only-child::before {
    left: 3px;
    right: 3px;
    border-radius: 2px 2px 100% 100%;
  }

  .aqua-segmented-group > button:first-child.aqua-button-blue::before {
    border-radius: 2px 0 100% 100%;
  }

  .aqua-segmented-group > button:last-child.aqua-button-blue::before {
    border-radius: 0 2px 100% 100%;
  }

  .aqua-segmented-group > button:only-child.aqua-button-blue::before {
    border-radius: 2px 2px 100% 100%;
  }

  /* ===== DROPDOWN MENUS ===== */
  .aqua-dropdown-menu {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
    border: 1px solid #999 !important;
    border-radius: 4px !important;
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
    padding: 4px;
  }

  .aqua-dropdown-item {
    @apply relative flex cursor-pointer items-center px-3 py-1.5 text-[11px] transition-colors outline-none;
    font-family: var(--font-ui);
    color: var(--color-text-primary);
  }

  .aqua-dropdown-item:hover:not(:disabled),
  .aqua-dropdown-item:focus:not(:disabled),
  .aqua-dropdown-item[data-highlighted]:not(:disabled) {
    background: var(--color-highlight) !important;
    color: var(--color-selection-text) !important;
  }

  .aqua-dropdown-item:disabled,
  .aqua-dropdown-item[data-disabled] {
    @apply cursor-not-allowed opacity-50;
    color: var(--color-text-secondary) !important;
  }

  .aqua-dropdown-item:disabled:hover,
  .aqua-dropdown-item:disabled:focus,
  .aqua-dropdown-item[data-disabled]:hover,
  .aqua-dropdown-item[data-disabled][data-highlighted] {
    background: transparent !important;
    color: var(--color-text-secondary) !important;
  }

  /* ===== TOOLBAR PATTERNS ===== */
  .aqua-toolbar-divider {
    @apply h-[32px] w-px;
    background: linear-gradient(180deg, transparent, #999 0%, #999 50%, transparent 100%);
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
}

/* ===== AQUA DROPDOWN OVERRIDES (outside @layer for specificity) ===== */
div[data-bookmark-dropdown].aqua-dropdown-menu {
  background-image: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%) !important;
  border: 1px solid #999 !important;
  border-radius: 4px !important;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  padding: 4px !important;
}

/* TextEdit contentEditable styling */
[contenteditable] ul,
[contenteditable] ol {
  margin: 1em 0;
  padding-left: 2.5em;
}

[contenteditable] li {
  margin: 0.25em 0;
}

[contenteditable] ul {
  list-style-type: disc;
}

[contenteditable] ol {
  list-style-type: decimal;
}

/* ===== NERD FONT FOR TERMINAL ===== */
@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Regular.ttf')
    format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Bold.ttf')
    format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Italic.ttf')
    format('truetype');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

/* ===== XTERM.JS OVERRIDES ===== */
.xterm {
  @apply relative h-full w-full;
}

.xterm .xterm-screen {
  @apply relative;
}

.xterm .xterm-helper-textarea {
  position: absolute !important;
  opacity: 0 !important;
  left: 0 !important;
  top: 0 !important;
  width: 0 !important;
  height: 0 !important;
  z-index: -10 !important;
  pointer-events: none !important;
  visibility: visible !important;
}
