@import 'tailwindcss';

/* Aqua Design Tokens */
:root {
  /* ===== COLORS ===== */
  --aqua-blue: #5a8dd9;
  --aqua-blue-hover: #6b9de5;
  --aqua-blue-active: #4978c8;
  --aqua-graphite: #7b7b7b;

  /* Semantic Colors */
  --color-highlight: var(--aqua-blue);
  --color-highlight-hover: var(--aqua-blue-hover);
  --color-selection-bg: var(--aqua-blue);
  --color-selection-text: #ffffff;
  --color-border-strong: #999999;
  --color-border-subtle: #cccccc;
  --color-text-primary: #2c2c2c;
  --color-text-secondary: #666666;

  /* Legacy/Existing Colors */
  --pinstripe-light: #f7f9fc;
  --pinstripe-dark: #e9edf3;
  --bezel-dark: #7b7b7b;
  --bezel-light: #ffffff;
  --font-ui: 'Lucida Grande', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

  /* Aqua Pinstripe Colors */
  --aqua-pinstripe-light-1: #f0f0f0;
  --aqua-pinstripe-light-2: #e4e4e4;
  --aqua-pinstripe-dark-1: rgba(255, 255, 255, 0.08);
  --aqua-pinstripe-dark-2: rgba(0, 0, 0, 0.15);

  /* ===== SHADOWS ===== */
  --shadow-window:
    0 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 15px 40px rgba(0, 0, 0, 0.5),
    0 2px 8px rgba(0, 0, 0, 0.3);

  --shadow-button: 0 1px 2px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8);

  --shadow-button-active: inset 1px 1px 0 #777, inset -1px -1px 0 #f9f9f9;

  --shadow-dropdown: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.6);

  /* ===== GRADIENTS ===== */
  --gradient-toolbar: linear-gradient(to bottom, #ffffff 0%, #e8e8e8 100%);
  --gradient-button: linear-gradient(to bottom, #ffffff 0%, #e8e8e8 100%);
  --gradient-button-hover: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);
  --gradient-button-active: linear-gradient(to bottom, #e0e0e0 0%, #d8d8d8 100%);
  --gradient-dropdown: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);

  /* ===== Z-INDEX SCALE ===== */
  --z-desktop: 0;
  --z-window: 10;
  --z-window-active: 20;
  --z-menubar: 50;
  --z-dock: 50;
  --z-dropdown: 10000;
  --z-modal: 20000;
}

body {
  margin: 0;
  font-family: var(--font-ui);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom Aqua Utilities */
@layer utilities {
  .pinstripe {
    background: repeating-linear-gradient(
      180deg,
      #e7e7e7 0px,
      #e0e0e0 1px,
      #d8d8d8 1px,
      #e0e0e0 2px
    );
  }

  .aqua-pinstripe {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
  }

  .aqua-pinstripe-dark {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-dark-1),
      var(--aqua-pinstripe-dark-1) 1px,
      var(--aqua-pinstripe-dark-2) 1px,
      var(--aqua-pinstripe-dark-2) 2px
    );
  }

  .aqua-window {
    border: 1px solid #7a7a7a;
    border-radius: 6px;
    background: white;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.8) inset,
      0 15px 40px rgba(0, 0, 0, 0.5),
      0 2px 8px rgba(0, 0, 0, 0.3);
    overflow: hidden;
  }

  .aqua-titlebar {
    height: 20px;
    border-bottom: 1px solid #919191;
    border-radius: 6px 6px 0 0;
    background: linear-gradient(to bottom, #ececec 0%, #d8d8d8 50%, #c5c5c5 50.1%, #b8b8b8 100%);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      inset 0 -1px 0 rgba(255, 255, 255, 0.3);
  }

  .aqua-titlebar.active {
    background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d1d1d1 50.1%, #c4c4c4 100%);
    border-bottom: 1px solid #9a9a9a;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 1),
      inset 0 -1px 0 rgba(255, 255, 255, 0.4);
  }

  .aqua-button {
    background: linear-gradient(to bottom, #ffffff, #e8e8e8);
    border: 1px solid #a0a0a0;
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: all 0.15s ease;
  }

  .aqua-button:hover {
    background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
  }

  .aqua-button:active {
    background: linear-gradient(to bottom, #e0e0e0, #d8d8d8);
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15) inset;
  }

  .aqua-menubar {
    background: repeating-linear-gradient(
      0deg,
      var(--aqua-pinstripe-light-1),
      var(--aqua-pinstripe-light-1) 1px,
      var(--aqua-pinstripe-light-2) 1px,
      var(--aqua-pinstripe-light-2) 2px
    );
    border-bottom: 1px solid #999999;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .desktop-icon-label {
    color: white;
    text-shadow:
      -1px -1px 0 rgba(0, 0, 0, 0.7),
      1px -1px 0 rgba(0, 0, 0, 0.7),
      -1px 1px 0 rgba(0, 0, 0, 0.7),
      1px 1px 0 rgba(0, 0, 0, 0.7);
    font-size: 11px;
    font-family: var(--font-ui);
    border-radius: 3px;
  }

  .desktop-icon-label.desktop-icon-selected {
    background: linear-gradient(to bottom, rgba(82, 140, 224, 0.92), rgba(49, 105, 198, 0.95));
    border: 1px solid rgba(33, 86, 170, 0.95);
    box-shadow:
      inset 0 1px 0 rgba(135, 177, 238, 0.4),
      0 1px 2px rgba(0, 0, 0, 0.4);
    text-shadow:
      0 -1px 0 rgba(0, 0, 0, 0.5),
      0 1px 0 rgba(135, 177, 238, 0.3);
  }

  .toolbar-button:active {
    background: #c8c8c8 !important;
    box-shadow:
      inset 1px 1px 0 #777,
      inset -1px -1px 0 #f9f9f9 !important;
  }

  /* ===== BUTTONS ===== */
  .aqua-button-base {
    @apply relative flex items-center justify-center;
    border: none;
    border-radius: 5px;
    /* 3D pill gradient - lighter top edge, darker bottom for depth */
    background-image: linear-gradient(
      to bottom,
      #f8f8f8 0%,
      #ececec 15%,
      #e0e0e0 40%,
      #d4d4d4 60%,
      #c8c8c8 85%,
      #bcbcbc 100%
    );
    /* Integrated shadow - no flat outline, uses gradient edge + soft shadow */
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.85),
      inset 0 -0.5px 0 rgba(0, 0, 0, 0.08),
      0 0.5px 1px rgba(0, 0, 0, 0.12),
      0 1px 2px rgba(0, 0, 0, 0.08);
    font-family: var(--font-ui);
    color: var(--color-text-primary);
    overflow: hidden;
  }

  /* Top shine for gray buttons - creates 3D gel pill effect */
  .aqua-button-base::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.65) 0%,
      rgba(255, 255, 255, 0.25) 60%,
      rgba(255, 255, 255, 0) 100%
    );
    border-radius: 5px 5px 50% 50%;
    pointer-events: none;
  }

  /* Bottom glow for gray buttons */
  .aqua-button-base::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 35%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.2) 100%
    );
    border-radius: 0 0 5px 5px;
    pointer-events: none;
  }

  .aqua-button-base:hover:not(:disabled):not(.aqua-button-blue) {
    background-image: linear-gradient(
      to bottom,
      #fcfcfc 0%,
      #f2f2f2 15%,
      #e8e8e8 40%,
      #dedede 60%,
      #d2d2d2 85%,
      #c6c6c6 100%
    );
  }

  .aqua-button-base:active:not(:disabled):not(.aqua-button-blue) {
    background-image: linear-gradient(
      to bottom,
      #c8c8c8 0%,
      #c0c0c0 15%,
      #b8b8b8 40%,
      #b0b0b0 60%,
      #a8a8a8 85%,
      #a0a0a0 100%
    );
    box-shadow:
      inset 0 1px 2px rgba(0, 0, 0, 0.15),
      inset 0 0 1px rgba(0, 0, 0, 0.1),
      0 0.5px 0 rgba(255, 255, 255, 0.3);
  }

  .aqua-button-base:active:not(:disabled):not(.aqua-button-blue)::before {
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.35) 0%,
      rgba(255, 255, 255, 0.1) 60%,
      rgba(255, 255, 255, 0) 100%
    );
  }

  .aqua-button-base:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  /* Classic Mac OS X Aqua Blue Gel Button */
  .aqua-button-base.aqua-button-blue {
    border: none;
    color: #000000;
    background-image: linear-gradient(
      to bottom,
      #c8e4fa 0%,
      #7ec4f6 12%,
      #4aa3df 35%,
      #2d8cd4 50%,
      #4aa3df 65%,
      #7ec4f6 88%,
      #b0d8f5 100%
    );
    /* Integrated shadow - no flat outline */
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.7),
      inset 0 -0.5px 0 rgba(0, 50, 120, 0.15),
      0 0.5px 1px rgba(0, 0, 0, 0.15),
      0 1px 2px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
  }

  /* Prominent gel highlight band overlay for blue */
  .aqua-button-base.aqua-button-blue::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 45%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.55) 0%,
      rgba(255, 255, 255, 0.2) 60%,
      rgba(255, 255, 255, 0) 100%
    );
    border-radius: 5px 5px 50% 50%;
    pointer-events: none;
  }

  /* Bottom glow for blue button */
  .aqua-button-base.aqua-button-blue::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30%;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.25) 100%
    );
    border-radius: 0 0 5px 5px;
    pointer-events: none;
  }

  .aqua-button-base.aqua-button-blue:hover:not(:disabled) {
    background-image: linear-gradient(
      to bottom,
      #d4ecfc 0%,
      #8ed4f8 12%,
      #5ab3e5 35%,
      #3db0da 50%,
      #5ab3e5 65%,
      #8ed4f8 88%,
      #c0e0f7 100%
    );
  }

  .aqua-button-base.aqua-button-blue:active:not(:disabled) {
    background-image: linear-gradient(
      to bottom,
      #a8d4f0 0%,
      #6ab4dc 12%,
      #3a93c9 35%,
      #1d7cba 50%,
      #3a93c9 65%,
      #6ab4dc 88%,
      #98c4e8 100%
    );
    box-shadow:
      inset 0 1px 2px rgba(0, 0, 0, 0.15),
      inset 0 0 1px rgba(0, 0, 0, 0.1),
      0 0.5px 0 rgba(255, 255, 255, 0.3);
  }

  .aqua-button-base.aqua-button-blue:active:not(:disabled)::before {
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.35) 0%,
      rgba(255, 255, 255, 0.1) 60%,
      rgba(255, 255, 255, 0) 100%
    );
  }


  /* Segmented controls - visually connected buttons with Aqua styling */
  .aqua-segmented-group {
    display: inline-flex;
    border-radius: 5px;
    /* Integrated shadow - flows with the 3D pill effect */
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.6),
      0 0.5px 1px rgba(0, 0, 0, 0.15),
      0 1px 2px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    /* Subtle border that doesn't look flat */
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.18));
    padding: 0.5px;
  }

  .aqua-segmented-group > button {
    border-radius: 0;
    margin: 0;
    position: relative;
    z-index: 1;
    box-shadow: none;
  }

  .aqua-segmented-group > button.aqua-button-blue {
    z-index: 2;
  }

  .aqua-segmented-group > button:first-child {
    border-radius: 4.5px 0 0 4.5px;
  }

  .aqua-segmented-group > button:last-child {
    border-radius: 0 4.5px 4.5px 0;
  }

  .aqua-segmented-group > button:not(:first-child) {
    border-left: 0.5px solid rgba(0, 0, 0, 0.15);
  }

  .aqua-segmented-group > button:only-child {
    border-radius: 4.5px;
  }

  /* Adjust ::before shine for grouped buttons */
  .aqua-segmented-group > button::before {
    border-radius: 0 0 50% 50%;
  }

  .aqua-segmented-group > button:first-child::before {
    border-radius: 4.5px 0 50% 50%;
  }

  .aqua-segmented-group > button:last-child::before {
    border-radius: 0 4.5px 50% 50%;
  }

  .aqua-segmented-group > button:only-child::before {
    border-radius: 4.5px 4.5px 50% 50%;
  }

  /* Adjust ::after glow for grouped buttons */
  .aqua-segmented-group > button::after {
    border-radius: 0;
  }

  .aqua-segmented-group > button:first-child::after {
    border-radius: 0 0 0 4.5px;
  }

  .aqua-segmented-group > button:last-child::after {
    border-radius: 0 0 4.5px 0;
  }

  .aqua-segmented-group > button:only-child::after {
    border-radius: 0 0 4.5px 4.5px;
  }

  /* Blue button specific adjustments in group */
  .aqua-segmented-group > button:first-child.aqua-button-blue::before {
    border-radius: 3px 0 100% 100%;
  }

  .aqua-segmented-group > button:last-child.aqua-button-blue::before {
    border-radius: 0 3px 100% 100%;
  }

  .aqua-segmented-group > button:only-child.aqua-button-blue::before {
    border-radius: 3px 3px 100% 100%;
  }

  /* ===== DROPDOWN MENUS ===== */
  .aqua-dropdown-menu {
    background-image: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%) !important;
    border: 1px solid #999 !important;
    border-radius: 4px !important;
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
    padding: 4px;
  }

  .aqua-dropdown-item {
    @apply relative flex cursor-pointer items-center px-3 py-1.5 text-[11px] transition-colors outline-none;
    font-family: var(--font-ui);
    font-size: 11px;
    color: var(--color-text-primary);
  }

  .aqua-dropdown-item:hover,
  .aqua-dropdown-item:focus {
    background: var(--color-highlight) !important;
    color: var(--color-selection-text) !important;
  }

  /* ===== TOOLBAR PATTERNS ===== */
  .aqua-toolbar-divider {
    @apply h-[32px] w-px;
    background: linear-gradient(180deg, transparent, #999 0%, #999 50%, transparent 100%);
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
}

/* ===== AQUA DROPDOWN OVERRIDES (outside @layer for specificity) ===== */
div[data-bookmark-dropdown].aqua-dropdown-menu {
  background-image: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%) !important;
  border: 1px solid #999 !important;
  border-radius: 4px !important;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  padding: 4px !important;
}

/* TextEdit contentEditable styling */
[contenteditable] ul,
[contenteditable] ol {
  margin: 1em 0;
  padding-left: 2.5em;
}

[contenteditable] li {
  margin: 0.25em 0;
}

[contenteditable] ul {
  list-style-type: disc;
}

[contenteditable] ol {
  list-style-type: decimal;
}

/* ===== NERD FONT FOR TERMINAL ===== */
@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Regular.ttf')
    format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Bold.ttf')
    format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGS NF';
  src: url('https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Italic.ttf')
    format('truetype');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

/* ===== XTERM.JS OVERRIDES ===== */
.xterm {
  @apply relative h-full w-full;
}

.xterm .xterm-screen {
  @apply relative;
}

.xterm .xterm-helper-textarea {
  position: absolute !important;
  opacity: 0 !important;
  left: 0 !important;
  top: 0 !important;
  width: 0 !important;
  height: 0 !important;
  z-index: -10 !important;
  pointer-events: none !important;
  visibility: visible !important;
}
