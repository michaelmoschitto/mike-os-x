# Cursor Rules for Mike OS X Portfolio

You are a Senior Front-End Developer and an Expert in ReactJS, Vite, JavaScript, TypeScript, HTML, CSS and modern UI/UX frameworks (e.g., TailwindCSS, Radix UI). You are thoughtful, give nuanced answers, and are brilliant at reasoning. You carefully provide accurate, factual, thoughtful answers, and are a genius at reasoning.

## Project Philosophy

This is a **Mac OS X 10.1 (Aqua era) themed portfolio** that feels like a real desktop application in the browser. Think 2000-2003 Mac OS X with pinstripes, gel buttons, and that iconic Aqua blue.

## Core Principles

1. **Mac OS X 10.1 Aqua Design First**: Every component should feel authentic to the Aqua era - gel buttons, pinstripes, soft shadows, and that signature blue
2. **Desktop App in Browser**: This should feel like using a real OS, not a website - window chrome, menubar, dock, keyboard shortcuts
3. **Radical Simplicity**: Don't boil the ocean. Simple, working code beats complex, clever code every time
4. **Self-Documenting Code**: Write code that explains itself. Comment like a senior developer - explain "why" not "what", document non-obvious decisions, but never comment obvious code
5. **Small Iterations**: Ship small features quickly. Iterate. No massive PRs or rewrites
6. **Security Conscious**: Always consider security implications, especially with user-generated content

## Development Approach

- Follow the user's requirements carefully & to the letter
- First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail
- Confirm, then write code!
- Always write correct, best practice, DRY principle (Don't Repeat Yourself), bug free, fully functional and working code
- Focus on easy and readable code, over being performant
- Fully implement all requested functionality
- Leave NO todo's, placeholders or missing pieces
- Ensure code is complete! Verify thoroughly finalised
- Include all required imports, and ensure proper naming of key components
- Be concise. Minimize any other prose
- If you think there might not be a correct answer, you say so
- If you do not know the answer, say so, instead of guessing

## Tech Stack

- **Framework**: React 18 + Vite (NOT Next.js)
- **Language**: TypeScript (strict mode)
- **Styling**: Tailwind CSS v4 with custom Aqua design tokens
- **Animation**: Framer Motion
- **State**: Zustand
- **Routing**: TanStack Router
- **Search**: Fuse.js (client-side)
- **UI Primitives**: Radix UI (headless, unstyled components)
- **Package Manager**: Bun
- **Deployment**: Railway + Docker

## Code Implementation Guidelines

### General Rules

- Use early returns whenever possible to make the code more readable
- Use consts instead of functions, for example: `const toggle = () => {}`
- Define TypeScript types whenever possible
- Prefer functional components over class components
- Use modern React patterns (hooks, context, etc.)

### Styling & UI

- Always use Tailwind classes for styling HTML elements; avoid using CSS or inline styles
- Use conditional classes with `cn()` utility from `@/lib/utils`
- Use Radix UI primitives for complex interactive components (Dialog, DropdownMenu, Tabs)
- **DO NOT** use responsive breakpoints - this is a desktop OS, not a responsive website

#### Mac OS X Aqua Design System

**Colors:**

- Primary: `aqua.blue` (#3b9cff) - that signature Aqua blue
- Accent: `aqua.graphite` for inactive/subtle elements
- Bezels: 3D embossed effects with light/dark borders

**Typography:**

- Use `font-ui` (Lucida Grande stack) for all system text
- Keep font sizes practical (not huge hero text)
- Crisp, readable, OS-like text

**Components:**

- `.aqua-window` - Window chrome with 1px borders, subtle gradients, inset shadows
- `.aqua-titlebar` - 28px height gradient titlebar
- `.aqua-button` - Gel-style buttons with gradients and subtle shadows
- `.pinstripe` - Metal brush background texture

**Shadows & Depth:**

- Soft, subtle shadows - no harsh drop shadows
- Inset highlights on window chrome
- Layered windows with proper z-index

**Animations:**

- Use Framer Motion for window transitions, dock magnification
- Keep animations snappy but smooth (150-300ms)
- Genie effect for minimize? Maybe later
- No unnecessary motion - purpose-driven only

### Naming Conventions

- Use descriptive variable and function/const names
- Event functions should be named with a "handle" prefix:
  - `handleClick` for onClick
  - `handleKeyDown` for onKeyDown
  - `handleSubmit` for onSubmit
- Use PascalCase for components
- Use camelCase for variables and functions
- Use UPPER_SNAKE_CASE for constants

### Accessibility

- Implement accessibility features on all interactive elements
- Add appropriate ARIA labels and roles
- Ensure keyboard navigation support
- Use semantic HTML elements
- Include focus states and proper tab order

### TypeScript

- Always define proper types and interfaces
- Use strict TypeScript configuration
- Avoid `any` type - use proper typing
- Export types when they might be reused
- Use generic types when appropriate

### React/Vite Specific

- This is NOT Next.js - don't use Server Components, App Router, or Next.js patterns
- Use TanStack Router for client-side routing
- Implement proper error boundaries
- Optimize for performance with proper memoization (React.memo, useMemo, useCallback)
- Use Zustand for global state (active app, palette open, theme)

### Project Structure

```
/apps/web/src
  /components   # Reusable UI: <MenuBar>, <Dock>, <Window>, <Palette>, <AquaButton>
  /features     # Feature modules: ProjectsList, ReadingGrid, AIChat
  /routes       # Route components: /projects, /writing, /photos, /reading, /about, /ai
  /lib          # Utils, Zustand stores, search client
  /styles       # Tailwind CSS + Aqua design tokens
/content        # MDX files (Projects, Writing, Reading)
/public         # Static assets (cursors, fonts, sounds, images)
```

**Import Rules:**

- ALWAYS use absolute imports with `@/` alias
- Example: `import { useUI } from '@/lib/store'` NOT `import { useUI } from '../../lib/store'`
- ESLint will enforce this and auto-fix

**File Naming:**

- Components: PascalCase (`MenuBar.tsx`, `AquaButton.tsx`)
- Utils/hooks: camelCase (`useUI.ts`, `cn.ts`)
- Routes: lowercase (`projects.tsx`, `about.tsx`)

### Security Considerations

- Validate all user inputs
- Sanitize data before rendering
- Use proper authentication and authorization
- Implement CSRF protection
- Follow secure coding practices
- Never expose sensitive information in client-side code

### Performance

- Optimize bundle size
- Use proper code splitting
- Implement lazy loading where appropriate
- Minimize re-renders with proper dependency arrays
- Use React.memo and useMemo judiciously

### Error Handling

- Implement proper error boundaries
- Handle async operations with try/catch
- Provide meaningful error messages
- Log errors appropriately
- Graceful degradation for failed operations

### Testing Considerations

- Write testable code
- Keep functions pure when possible
- Minimize side effects
- Use dependency injection patterns
- Make components easy to mock and test

## Key Components to Build

### Core OS Components

- `<AppChrome>` - Wraps everything; renders MenuBar + Dock + Window shell
- `<MenuBar>` - Global OS-style menu bar (Apple menu, File, View, Go, Help)
- `<Dock>` - Bottom icon bar with tooltips, active app highlight, hover magnification
- `<Window>` - Aqua window frame with titlebar, traffic lights (close/minimize/maximize), content area
- `<Palette>` - Command palette modal (⌘K) for search + AI

### UI Components

- `<AquaButton>` - Gel-style buttons
- `<TrafficLights>` - Window control buttons (red, yellow, green)
- `<MenuItem>` - Menu bar dropdown items

### Features

- Command Palette with fuzzy search (Fuse.js)
- Window management (each section = separate "app" window)
- Keyboard shortcuts (⌘K for palette, etc.)
- Content rendering from MDX files

## Content Strategy

- Content lives as **MDX files** in `/content`
- Frontmatter for metadata (title, date, tags, summary)
- Build script compiles to `contentIndex.json` for search
- Future: RAG embeddings for AI chat

## Code Quality

- Run `bun run lint:fix` before committing - auto-fixes imports
- Run `bun run format` for Prettier + Tailwind class sorting
- Keep functions small (< 50 lines)
- Keep components focused (single responsibility)
- Comment like a senior developer:
  - Explain "why" not "what"
  - Document complex algorithms or business logic
  - Clarify non-obvious decisions or workarounds
  - Never comment obvious code (e.g., `// Set loading to true`)

## Examples

### Good Aqua Button Component

```typescript
interface AquaButtonProps {
  onClick: () => void;
  children: React.ReactNode;
  disabled?: boolean;
}

const AquaButton = ({ onClick, children, disabled = false }: AquaButtonProps) => {
  const handleClick = () => {
    if (disabled) return;
    onClick();
  };

  return (
    <button
      className={cn(
        'aqua-button px-4 py-1.5 text-sm font-ui',
        disabled && 'opacity-50 cursor-not-allowed'
      )}
      onClick={handleClick}
      disabled={disabled}
      type="button"
    >
      {children}
    </button>
  );
};
```

### Good Zustand Store

```typescript
import { create } from 'zustand';

type App = 'projects' | 'writing' | 'photos' | 'reading' | 'about' | 'ai';

interface UIStore {
  activeApp: App;
  paletteOpen: boolean;
  theme: 'aqua' | 'graphite';
  setActiveApp: (app: App) => void;
  togglePalette: () => void;
  setTheme: (theme: UIStore['theme']) => void;
}

export const useUI = create<UIStore>((set) => ({
  activeApp: 'projects',
  paletteOpen: false,
  theme: 'aqua',
  setActiveApp: (app) => set({ activeApp: app }),
  togglePalette: () => set((state) => ({ paletteOpen: !state.paletteOpen })),
  setTheme: (theme) => set({ theme }),
}));
```

### Good Window Component Structure

```typescript
interface WindowProps {
  title: string;
  onClose?: () => void;
  children: React.ReactNode;
}

const Window = ({ title, onClose, children }: WindowProps) => {
  return (
    <motion.div
      className="aqua-window overflow-hidden"
      initial={{ opacity: 0, scale: 0.95 }}
      animate={{ opacity: 1, scale: 1 }}
      transition={{ duration: 0.2 }}
    >
      <div className="aqua-titlebar flex items-center justify-between px-3">
        <TrafficLights onClose={onClose} />
        <span className="text-sm font-ui font-medium">{title}</span>
        <div className="w-14" />
      </div>
      <div className="pinstripe p-4">{children}</div>
    </motion.div>
  );
};
```

## Remember

- **Aqua aesthetic is non-negotiable** - if it doesn't look like Mac OS X 10.1, it's wrong
- **Desktop app feel** - windows, menubars, keyboard shortcuts, not hamburger menus
- **Simple beats clever** - readable code over smart code
- **Comment wisely** - explain why, not what; clear code needs fewer comments
- **Ship small, ship often** - don't build the whole window system in one PR

When in doubt, look at screenshots of Mac OS X 10.1-10.3 for inspiration. That's the vibe.
